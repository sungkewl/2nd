<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Listening Bingo</title>

    <!-- Google Font (í˜ì´ì§€ ì „ìš©) -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap"
      rel="stylesheet"
    />

    <!-- ë‹¨ë… ìŠ¤íƒ€ì¼ -->
    <link
      href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="./css/bingo.css" />
  </head>
  <body>
    <h1>Bingo Quest</h1>
    <div class="main-container">
      <!-- ì¢Œì¸¡: í•™ìŠµ ëª©ë¡ -->
      <nav class="sidebar left-nav" aria-label="í•™ìŠµ ëª©ë¡">
        <h2>í•™ìŠµ ëª©ë¡</h2>
        <ul class="nav-list">
          <li>
            <a href="#" class="nav-link active" data-target="#video-1-content"
              >Freedom in Prison (Video 1)</a
            >
          </li>
          <li>
            <a href="#" class="nav-link" data-target="#video-2-content"
              >The Worldâ€™s Most Dangerous River (Video 2)</a
            >
          </li>
        </ul>
      </nav>

      <!-- ì¤‘ì•™: ì˜ìƒ + ë¹™ê³  ê²Œì„ -->
      <main class="main-content" id="main">
        <!-- ë¹„ë””ì˜¤ 1 -->
        <section
          id="video-1-content"
          class="content-section active"
          aria-label="Freedom in Prison"
        >
          <div class="video-container">
            <iframe
              src="https://embed.ted.com/talks/lei_cheng_what_i_learned_about_freedom_in_a_secret_chinese_prison"
              title="TED Talk: Freedom in Prison by Lei Cheng"
              loading="lazy"
              allow="autoplay; encrypted-media; fullscreen; picture-in-picture"
              referrerpolicy="no-referrer-when-downgrade"
              sandbox="allow-scripts allow-same-origin allow-presentation allow-popups"
              
            >
            </iframe>
            <div class="video-fallback">
              <a
                class="open-extern"
                target="_blank"
                rel="noopener"
                href="https://www.ted.com/talks/lei_cheng_what_i_learned_about_freedom_in_a_secret_chinese_prison"
              >
                â–¶ ì˜ìƒì´ ì•ˆ ë³´ì´ë©´ ì—¬ê¸°ì„œ ìƒˆ íƒ­ìœ¼ë¡œ ì—´ê¸°
              </a>
            </div>
          </div>

          <div class="game-area">
            <div class="bingo-section visible">
              <div class="controls">
                <div class="bingo-counter" aria-live="polite">BINGO: 0</div>
                <button class="reset-btn" type="button">ë‹¤ì‹œí•˜ê¸°</button>
              </div>
              <div class="message-area" aria-live="polite">
                ë¹™ê³ ë¥¼ ì‹œì‘í•˜ë ¤ë©´ ë‹¨ì–´ë¥¼ í´ë¦­í•˜ì„¸ìš”!
              </div>
              <!-- JSì—ì„œ 5x5 ì¹¸ ìƒì„± -->
              <div
                class="bingo-board"
                role="grid"
                aria-label="ë¹™ê³  ë³´ë“œ (Video 1)"
              ></div>
            </div>
          </div>
        </section>

        <!-- ë¹„ë””ì˜¤ 2 -->
        <section
          id="video-2-content"
          class="content-section"
          aria-label="The Worldâ€™s Most Dangerous River"
        >
          <div class="video-container">
            <iframe
              src="https://embed.ted.com/talks/hany_farid_how_to_spot_fake_ai_photos"
              title="How to spot fake AI photos by Hany Farid"
              loading="lazy"
              allow="autoplay; encrypted-media; fullscreen; picture-in-picture"
              referrerpolicy="no-referrer-when-downgrade"
              sandbox="allow-scripts allow-same-origin allow-presentation allow-popups"
              
            >
            </iframe>

            <div class="video-fallback">
              <a
                class="open-extern"
                target="_blank"
                rel="noopener"
                href="https://www.ted.com/talks/lei_cheng_what_i_learned_about_freedom_in_a_secret_chinese_prison"
              >
                â–¶ ì˜ìƒì´ ì•ˆ ë³´ì´ë©´ ì—¬ê¸°ì„œ ìƒˆ íƒ­ìœ¼ë¡œ ì—´ê¸°
              </a>
            </div>
          </div>

          <div class="game-area">
            <div class="bingo-section visible">
              <div class="controls">
                <div class="bingo-counter" aria-live="polite">BINGO: 0</div>
                <button class="reset-btn" type="button">ë‹¤ì‹œí•˜ê¸°</button>
              </div>
              <div class="message-area" aria-live="polite">
                ë¹™ê³ ë¥¼ ì‹œì‘í•˜ë ¤ë©´ ë‹¨ì–´ë¥¼ í´ë¦­í•˜ì„¸ìš”!
              </div>
              <div
                class="bingo-board"
                role="grid"
                aria-label="ë¹™ê³  ë³´ë“œ (Video 2)"
              ></div>
            </div>
          </div>
        </section>
      </main>

      <!-- ìš°ì¸¡: ë±ƒì§€ -->
      <aside class="sidebar right-badges" aria-label="ë‚˜ì˜ ë±ƒì§€">
        <div class="avatar-widget">
          <div
            id="avatar-figure"
            class="avatar-figure"
            aria-label="ì•„ë°”íƒ€"
          ></div>
          <div class="avatar-meta">
            <div id="avatar-title" class="avatar-title">Novice Reader</div>
            <div id="avatar-desc" class="avatar-desc">ê¸°ë³¸ ë³µì¥</div>
          </div>
        </div>
        <h2>ë‚˜ì˜ ë±ƒì§€</h2>
        <div class="badge-grid">
          <div
            id="badge-first-bingo"
            class="badge locked"
            data-tooltip="ì²« ë²ˆì§¸ ë¹™ê³ ë¥¼ ë‹¬ì„±í•˜ì„¸ìš”"
          >
            <span class="badge-icon">ğŸ†</span>
            <span class="badge-name">ì²« ë¹™ê³ !</span>
          </div>
          <div
            id="badge-perfect"
            class="badge locked"
            data-tooltip="ëª¨ë“  ì¹¸ì„ ì±„ìš°ì„¸ìš” (ë¸”ë™ì•„ì›ƒ)"
          >
            <span class="badge-icon">âœ¨</span>
            <span class="badge-name">ì™„ë²½ì£¼ì˜ì</span>
          </div>
          <div
            id="badge-ted-fan"
            class="badge locked"
            data-tooltip="TED ì˜ìƒ 5ê°œ í•™ìŠµ ì™„ë£Œ"
          >
            <span class="badge-icon">â¤ï¸</span>
            <span class="badge-name">TED ë§¤ë‹ˆì•„</span>
          </div>
          <div
            id="badge-beginner"
            class="badge achieved"
            data-tooltip="íšŒì›ê°€ì… ì™„ë£Œ"
          >
            <span class="badge-icon">ğŸš€</span>
            <span class="badge-name">ìƒˆë¡œìš´ ì‹œì‘</span>
          </div>
          <div
            id="badge-word-master"
            class="badge locked"
            data-tooltip="ë‹¨ì–´ 100ê°œ í•™ìŠµ ì™„ë£Œ"
          >
            <span class="badge-icon">ğŸ“š</span>
            <span class="badge-name">ë‹¨ì–´ ë°•ì‚¬</span>
          </div>
        </div>
      </aside>
    </div>
    <a href="./index.html" class="home-float-btn" aria-label="í™ˆìœ¼ë¡œ"> ğŸ  </a>

    <script defer src="./js/dataManager.js"></script>
    <script defer src="./js/avatarWidget.js"></script>
    <script defer src="./js/bingo.js"></script>

    <script>
      // â‘  Promise rejection ì¤‘ TED ê´‘ê³  SDK(GPT) íƒ€ì„ì•„ì›ƒë§Œ ë¬´ìŒ
      window.addEventListener("unhandledrejection", (event) => {
        const msg = String(event?.reason?.message || event?.reason || "");
        if (/GPT did not load within the specified timeout/i.test(msg)) {
          event.preventDefault();
          console.info("[silenced] third-party GPT timeout");
        }
      });

      // â‘¡ window.onerrorë„ TED/VWO/Prebid/React-iframe
      window.addEventListener(
        "error",
        (event) => {
          const src = String(event?.filename || "");
          const msg = String(event?.message || "");
          const is3p =
            /(embed\.ted\.com|gpt\.js|prebid|vwo|react.*production|lei_cheng_|catherine_d_o_connell)/i.test(
              src + msg
            );
          if (is3p) {
            event.preventDefault();
            console.info("[silenced] third-party error:", src || msg);
          }
        },
        true
      );
    </script>
  </body>
</html>
